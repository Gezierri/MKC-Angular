<div class="container mt-3 p-3">
  <h2 class="mb-4">Lista de clientes</h2>
  <div class="mb-4 row">
    <div class="col-12 col-lg d-flex justify-content-end space">
      <form class="d-flex">
        <div class="input-group">
          <input (keyup)="findClientByName()" [(ngModel)]="searchName" name="searchName" type="text"
                 class="form-control border-success"
                 placeholder="Buscar...">
        </div>
      </form>
      <button class="btn btn-primary ms-2" routerLink="/client-form">
        <i class="bi bi-person-plus"></i>
        <span class="m-2">Novo</span>
      </button>
    </div>
  </div>
  <div class="table-responsive max-height" *ngIf="loading == false">
    <table class="table table-hover">
      <thead class="sticky-top">
      <tr>
        <th>Nome</th>
        <th>Idade</th>
        <th>Aniversario</th>
        <th>Telefone</th>
        <th>E-mail</th>
        <th>Cidade</th>
        <th>Bairro</th>
        <th></th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let client of (
                  searchName ? clients :
                  root.content | paginate: { itemsPerPage: itemPerPage, currentPage: page + 1, totalItems: totalClients }
                )">

        <td>{{client.name}}</td>
        <td>{{ageFromDateOfBirthday(client.dateBirth)}}</td>
        <td>{{client.dateBirth | dateFormat}}</td>
        <td>{{client.phone}}</td>
        <td>{{client.email}}</td>
        <td>{{client.address.city}}</td>
        <td>{{client.address.neighborhood}}</td>
        <td class="text-center">
          <div class="justify-content-center">
            <button class="btn btn-info" (click)="editClient(client.id)">
              <i class="bi bi-pencil text-white"></i>
            </button>
            <button class="btn btn-danger ms-2" (click)="deleteClient(client.id, client.name)">
              <i class="bi bi-trash"></i>
            </button>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <div class="mt-3 text-end" *ngIf="loading == false">
    <ng-container *ngIf="!searchName">
      <pagination-controls (pageChange)="onPageChange($event)"></pagination-controls>
    </ng-container>
  </div>
  <app-loading *ngIf="loading"></app-loading>
</div>
